# AI-Powered Open-Source Package & OS Image Remediation Workflow

## Overview

This project implements a fully automated AI-driven vulnerability remediation system using:

- **n8n** (workflow orchestration)
- **Python (FastAPI)** for custom logic
- **Trivy** for vulnerability scanning
- **LangChain + OpenAI GPT-4o-mini** for remediation reasoning
- **LangSmith** for AI observability
- Docker-based on-prem deployment

---

## Architecture

User Input → n8n → Python Agent → Trivy → GPT → Validation → Artifacts

### Components

| Component | Role |
|------------|--------|
| n8n | Orchestrates workflow |
| Python Agent | Core remediation logic |
| Trivy | Vulnerability scanning |
| GPT-4o-mini | Suggest safer versions |
| LangSmith | AI trace observability |

---

## Features

- Accepts:
  - OS Images (alpine:3.19, debian:10, ubuntu:22.04)
  - (Extensible to npm / PyPI packages)
- Detects HIGH / CRITICAL CVEs
- Generates safer alternative
- Re-validates suggestion
- Rejects regression if vulnerabilities increase
- Produces:
  - report.md
  - Dockerfile.remediated
  - rebuild.sh
- Logs:
  - execution time
  - token usage
  - AI trace (LangSmith)

---

## Running Locally

### 1. Configure environment

Create `.env` from `.env.example`:

Example:

http://python-agent:8000/analyze

{
  "type": "image",
  "input": "alpine:3.12"
}